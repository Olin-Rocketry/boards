EESchema Schematic File Version 4
LIBS:bms2-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L pspice:INDUCTOR L?
U 1 1 5E121EBF
P 1900 4650
F 0 "L?" H 1900 4865 50  0000 C CNN
F 1 "INDUCTOR" H 1900 4774 50  0000 C CNN
F 2 "" H 1900 4650 50  0001 C CNN
F 3 "~" H 1900 4650 50  0001 C CNN
	1    1900 4650
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5E121F6F
P 1050 4800
F 0 "C?" H 1165 4846 50  0000 L CNN
F 1 "C" H 1165 4755 50  0000 L CNN
F 2 "" H 1088 4650 50  0001 C CNN
F 3 "~" H 1050 4800 50  0001 C CNN
	1    1050 4800
	1    0    0    -1  
$EndComp
$Comp
L Device:D D?
U 1 1 5E12235B
P 1550 4800
F 0 "D?" V 1504 4879 50  0000 L CNN
F 1 "D" V 1595 4879 50  0000 L CNN
F 2 "" H 1550 4800 50  0001 C CNN
F 3 "~" H 1550 4800 50  0001 C CNN
	1    1550 4800
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 5E1223CA
P 2250 4800
F 0 "C?" H 2365 4846 50  0000 L CNN
F 1 "C" H 2365 4755 50  0000 L CNN
F 2 "" H 2288 4650 50  0001 C CNN
F 3 "~" H 2250 4800 50  0001 C CNN
	1    2250 4800
	1    0    0    -1  
$EndComp
Connection ~ 1550 4650
Wire Wire Line
	1550 4650 1650 4650
Wire Wire Line
	2150 4650 2250 4650
Connection ~ 2250 4650
Wire Wire Line
	2250 4650 2650 4650
Wire Wire Line
	1050 4950 1550 4950
Connection ~ 1550 4950
Wire Wire Line
	1550 4950 2250 4950
Wire Wire Line
	1050 4650 900  4650
Connection ~ 1050 4650
Wire Wire Line
	1050 4950 900  4950
Connection ~ 1050 4950
$Comp
L power:GND #PWR?
U 1 1 5E1226F8
P 900 4950
F 0 "#PWR?" H 900 4700 50  0001 C CNN
F 1 "GND" H 905 4777 50  0000 C CNN
F 2 "" H 900 4950 50  0001 C CNN
F 3 "" H 900 4950 50  0001 C CNN
	1    900  4950
	1    0    0    -1  
$EndComp
$Comp
L Device:Opamp_Dual_Generic U?
U 1 1 5E122B7E
P 4000 5050
F 0 "U?" H 4000 5417 50  0000 C CNN
F 1 "Opamp_Dual_Generic" H 4000 5326 50  0000 C CNN
F 2 "" H 4000 5050 50  0001 C CNN
F 3 "~" H 4000 5050 50  0001 C CNN
	1    4000 5050
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5E122C29
P 2650 4800
F 0 "R?" H 2720 4846 50  0000 L CNN
F 1 "R" H 2720 4755 50  0000 L CNN
F 2 "" V 2580 4800 50  0001 C CNN
F 3 "~" H 2650 4800 50  0001 C CNN
	1    2650 4800
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5E122F2C
P 3000 4650
F 0 "R?" V 2793 4650 50  0000 C CNN
F 1 "R" V 2884 4650 50  0000 C CNN
F 2 "" V 2930 4650 50  0001 C CNN
F 3 "~" H 3000 4650 50  0001 C CNN
	1    3000 4650
	0    1    1    0   
$EndComp
$Comp
L Device:R R?
U 1 1 5E122FD7
P 3350 4800
F 0 "R?" H 3280 4754 50  0000 R CNN
F 1 "R" H 3280 4845 50  0000 R CNN
F 2 "" V 3280 4800 50  0001 C CNN
F 3 "~" H 3350 4800 50  0001 C CNN
	1    3350 4800
	-1   0    0    1   
$EndComp
Wire Wire Line
	3150 4650 3350 4650
Wire Wire Line
	2650 4650 2850 4650
Connection ~ 2650 4650
Wire Wire Line
	2650 4950 2650 5150
Wire Wire Line
	2650 5150 3450 5150
Wire Wire Line
	3350 4950 3700 4950
$Comp
L Device:Q_PNP_BCE Q?
U 1 1 5E123D91
P 3550 5600
F 0 "Q?" H 3741 5554 50  0000 L CNN
F 1 "Q_PNP_BCE" H 3741 5645 50  0000 L CNN
F 2 "" H 3750 5700 50  0001 C CNN
F 3 "~" H 3550 5600 50  0001 C CNN
	1    3550 5600
	-1   0    0    1   
$EndComp
Wire Wire Line
	3450 5400 3450 5150
Connection ~ 3450 5150
Wire Wire Line
	3450 5150 3700 5150
$Comp
L Device:D_Zener_ALT D?
U 1 1 5E1240DB
P 4850 5050
F 0 "D?" V 4804 5129 50  0000 L CNN
F 1 "D_Zener_ALT" V 4895 5129 50  0000 L CNN
F 2 "" H 4850 5050 50  0001 C CNN
F 3 "~" H 4850 5050 50  0001 C CNN
	1    4850 5050
	0    1    1    0   
$EndComp
Wire Wire Line
	4300 5050 4300 5600
Wire Wire Line
	4300 5600 3750 5600
$Comp
L Device:R R?
U 1 1 5E124337
P 3450 6050
F 0 "R?" H 3380 6004 50  0000 R CNN
F 1 "R" H 3380 6095 50  0000 R CNN
F 2 "" V 3380 6050 50  0001 C CNN
F 3 "~" H 3450 6050 50  0001 C CNN
	1    3450 6050
	-1   0    0    1   
$EndComp
Wire Wire Line
	4850 5850 4850 5200
Wire Wire Line
	3450 5800 3450 5850
Wire Wire Line
	3450 5850 4850 5850
Connection ~ 3450 5850
Wire Wire Line
	3450 5850 3450 5900
$Comp
L power:GND #PWR?
U 1 1 5E12489C
P 3450 6200
F 0 "#PWR?" H 3450 5950 50  0001 C CNN
F 1 "GND" H 3455 6027 50  0000 C CNN
F 2 "" H 3450 6200 50  0001 C CNN
F 3 "" H 3450 6200 50  0001 C CNN
	1    3450 6200
	1    0    0    -1  
$EndComp
Wire Wire Line
	3350 4650 4850 4650
Connection ~ 3350 4650
Wire Wire Line
	4850 4900 4850 4650
Connection ~ 4850 4650
$Comp
L Device:R R?
U 1 1 5E124D41
P 5550 4800
F 0 "R?" H 5480 4754 50  0000 R CNN
F 1 "R" H 5480 4845 50  0000 R CNN
F 2 "" V 5480 4800 50  0001 C CNN
F 3 "~" H 5550 4800 50  0001 C CNN
	1    5550 4800
	-1   0    0    1   
$EndComp
Wire Wire Line
	4850 4650 5550 4650
Connection ~ 5550 4650
Wire Wire Line
	5550 4650 5800 4650
$Comp
L power:GND #PWR?
U 1 1 5E125046
P 5550 4950
F 0 "#PWR?" H 5550 4700 50  0001 C CNN
F 1 "GND" H 5555 4777 50  0000 C CNN
F 2 "" H 5550 4950 50  0001 C CNN
F 3 "" H 5550 4950 50  0001 C CNN
	1    5550 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	1050 4650 1550 4650
Text Notes 850  4300 0    50   ~ 10
CC/CV Charging
Text Notes 850  2600 0    50   ~ 10
CC Discharging
$Comp
L Device:Opamp_Dual_Generic U?
U 1 1 5E125949
P 1250 3050
F 0 "U?" H 1250 3417 50  0000 C CNN
F 1 "Opamp_Dual_Generic" H 1250 3326 50  0000 C CNN
F 2 "" H 1250 3050 50  0001 C CNN
F 3 "~" H 1250 3050 50  0001 C CNN
	1    1250 3050
	1    0    0    -1  
$EndComp
$Comp
L Device:LED D?
U 1 1 5E125A98
P 2450 2700
F 0 "D?" V 2488 2583 50  0000 R CNN
F 1 "LED" V 2397 2583 50  0000 R CNN
F 2 "" H 2450 2700 50  0001 C CNN
F 3 "~" H 2450 2700 50  0001 C CNN
	1    2450 2700
	0    -1   -1   0   
$EndComp
$Comp
L Device:C C?
U 1 1 5E1261F8
P 1700 3200
F 0 "C?" V 1448 3200 50  0000 C CNN
F 1 "C" V 1539 3200 50  0000 C CNN
F 2 "" H 1738 3050 50  0001 C CNN
F 3 "~" H 1700 3200 50  0001 C CNN
	1    1700 3200
	-1   0    0    1   
$EndComp
$Comp
L Device:R R?
U 1 1 5E1262AB
P 2000 3050
F 0 "R?" V 2207 3050 50  0000 C CNN
F 1 "R" V 2116 3050 50  0000 C CNN
F 2 "" V 1930 3050 50  0001 C CNN
F 3 "~" H 2000 3050 50  0001 C CNN
	1    2000 3050
	0    -1   -1   0   
$EndComp
$Comp
L Device:R R?
U 1 1 5E126395
P 1100 3500
F 0 "R?" V 1307 3500 50  0000 C CNN
F 1 "R" V 1216 3500 50  0000 C CNN
F 2 "" V 1030 3500 50  0001 C CNN
F 3 "~" H 1100 3500 50  0001 C CNN
	1    1100 3500
	0    -1   -1   0   
$EndComp
$Comp
L Device:R R?
U 1 1 5E12640F
P 2450 3800
F 0 "R?" H 2380 3754 50  0000 R CNN
F 1 "R" H 2380 3845 50  0000 R CNN
F 2 "" V 2380 3800 50  0001 C CNN
F 3 "~" H 2450 3800 50  0001 C CNN
	1    2450 3800
	-1   0    0    1   
$EndComp
Wire Wire Line
	950  3150 950  3350
Wire Wire Line
	1550 3050 1700 3050
Connection ~ 1700 3050
Wire Wire Line
	1700 3050 1850 3050
Wire Wire Line
	950  3350 1700 3350
Connection ~ 950  3350
Wire Wire Line
	950  3350 950  3500
$Comp
L Device:Q_NMOS_SGD Q?
U 1 1 5E14BFEE
P 2350 3050
F 0 "Q?" H 2555 3096 50  0000 L CNN
F 1 "Q_NMOS_SGD" H 2555 3005 50  0000 L CNN
F 2 "" H 2550 3150 50  0001 C CNN
F 3 "~" H 2350 3050 50  0001 C CNN
	1    2350 3050
	1    0    0    -1  
$EndComp
Wire Wire Line
	1250 3500 2450 3500
Wire Wire Line
	2450 3250 2450 3500
Connection ~ 2450 3500
Wire Wire Line
	2450 3500 2450 3650
Text Notes 800  750  0    50   ~ 10
Charge Shuttering
$Comp
L Device:R R?
U 1 1 5E14DB44
P 1000 1050
F 0 "R?" V 793 1050 50  0000 C CNN
F 1 "R" V 884 1050 50  0000 C CNN
F 2 "" V 930 1050 50  0001 C CNN
F 3 "~" H 1000 1050 50  0001 C CNN
	1    1000 1050
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 5E14DBE6
P 1200 1250
F 0 "C?" H 1315 1296 50  0000 L CNN
F 1 "C" H 1315 1205 50  0000 L CNN
F 2 "" H 1238 1100 50  0001 C CNN
F 3 "~" H 1200 1250 50  0001 C CNN
	1    1200 1250
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5E14DDF6
P 1000 1450
F 0 "R?" V 793 1450 50  0000 C CNN
F 1 "R" V 884 1450 50  0000 C CNN
F 2 "" V 930 1450 50  0001 C CNN
F 3 "~" H 1000 1450 50  0001 C CNN
	1    1000 1450
	0    1    1    0   
$EndComp
$Comp
L Device:Q_NMOS_DGS Q?
U 1 1 5E14DEA9
P 1600 1250
F 0 "Q?" H 1550 1050 50  0000 L CNN
F 1 "Q_NMOS_DGS" H 1150 950 50  0000 L CNN
F 2 "" H 1800 1350 50  0001 C CNN
F 3 "~" H 1600 1250 50  0001 C CNN
	1    1600 1250
	-1   0    0    1   
$EndComp
Wire Wire Line
	1150 1050 1200 1050
Wire Wire Line
	1150 1450 1200 1450
Wire Wire Line
	1200 1400 1200 1450
Connection ~ 1200 1450
Wire Wire Line
	1200 1450 1500 1450
Wire Wire Line
	1200 1100 1200 1050
Connection ~ 1200 1050
Wire Wire Line
	1200 1050 1500 1050
$Comp
L Device:R R?
U 1 1 5E150DEF
P 1000 1900
F 0 "R?" V 793 1900 50  0000 C CNN
F 1 "R" V 884 1900 50  0000 C CNN
F 2 "" V 930 1900 50  0001 C CNN
F 3 "~" H 1000 1900 50  0001 C CNN
	1    1000 1900
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 5E150DF6
P 1200 2100
F 0 "C?" H 1315 2146 50  0000 L CNN
F 1 "C" H 1315 2055 50  0000 L CNN
F 2 "" H 1238 1950 50  0001 C CNN
F 3 "~" H 1200 2100 50  0001 C CNN
	1    1200 2100
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5E150DFD
P 1000 2300
F 0 "R?" V 793 2300 50  0000 C CNN
F 1 "R" V 884 2300 50  0000 C CNN
F 2 "" V 930 2300 50  0001 C CNN
F 3 "~" H 1000 2300 50  0001 C CNN
	1    1000 2300
	0    1    1    0   
$EndComp
$Comp
L Device:Q_NMOS_DGS Q?
U 1 1 5E150E04
P 1600 2100
F 0 "Q?" H 1450 2000 50  0000 L CNN
F 1 "Q_NMOS_DGS" H 1150 1900 50  0000 L CNN
F 2 "" H 1800 2200 50  0001 C CNN
F 3 "~" H 1600 2100 50  0001 C CNN
	1    1600 2100
	-1   0    0    1   
$EndComp
Wire Wire Line
	1150 1900 1200 1900
Wire Wire Line
	1150 2300 1200 2300
Wire Wire Line
	1200 2250 1200 2300
Connection ~ 1200 2300
Wire Wire Line
	1200 2300 1500 2300
Wire Wire Line
	1200 1950 1200 1900
Connection ~ 1200 1900
Wire Wire Line
	1200 1900 1500 1900
$Comp
L Device:C C?
U 1 1 5E151B4A
P 1200 1650
F 0 "C?" H 1315 1696 50  0000 L CNN
F 1 "C" H 1315 1605 50  0000 L CNN
F 2 "" H 1238 1500 50  0001 C CNN
F 3 "~" H 1200 1650 50  0001 C CNN
	1    1200 1650
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_DGS Q?
U 1 1 5E151C11
P 1600 1650
F 0 "Q?" H 1450 1550 50  0000 L CNN
F 1 "Q_NMOS_DGS" H 1150 1450 50  0000 L CNN
F 2 "" H 1800 1750 50  0001 C CNN
F 3 "~" H 1600 1650 50  0001 C CNN
	1    1600 1650
	-1   0    0    1   
$EndComp
Connection ~ 1500 1450
Wire Wire Line
	1200 1450 1200 1500
Wire Wire Line
	1200 1800 1200 1900
Wire Wire Line
	1500 1850 1500 1900
Connection ~ 1500 1900
$Comp
L Device:Battery_Cell BT?
U 1 1 5E153D2D
P 700 1300
F 0 "BT?" H 818 1396 50  0000 L CNN
F 1 "Battery_Cell" H 818 1305 50  0000 L CNN
F 2 "" V 700 1360 50  0001 C CNN
F 3 "~" V 700 1360 50  0001 C CNN
	1    700  1300
	1    0    0    -1  
$EndComp
$Comp
L Device:Battery_Cell BT?
U 1 1 5E153DBF
P 700 1750
F 0 "BT?" H 818 1846 50  0000 L CNN
F 1 "Battery_Cell" H 818 1755 50  0000 L CNN
F 2 "" V 700 1810 50  0001 C CNN
F 3 "~" V 700 1810 50  0001 C CNN
	1    700  1750
	1    0    0    -1  
$EndComp
$Comp
L Device:Battery_Cell BT?
U 1 1 5E153E21
P 700 2150
F 0 "BT?" H 818 2246 50  0000 L CNN
F 1 "Battery_Cell" H 818 2155 50  0000 L CNN
F 2 "" V 700 2210 50  0001 C CNN
F 3 "~" V 700 2210 50  0001 C CNN
	1    700  2150
	1    0    0    -1  
$EndComp
Wire Wire Line
	850  1050 700  1050
Wire Wire Line
	700  1050 700  1100
Wire Wire Line
	700  1400 700  1450
Wire Wire Line
	700  1450 850  1450
Wire Wire Line
	700  1450 700  1550
Connection ~ 700  1450
Wire Wire Line
	700  1850 700  1900
Wire Wire Line
	850  1900 700  1900
Connection ~ 700  1900
Wire Wire Line
	700  1900 700  1950
Wire Wire Line
	700  2250 700  2300
Wire Wire Line
	700  2300 850  2300
$Comp
L formula:CONN_02X03 J?
U 1 1 5E15A020
P 10400 1250
F 0 "J?" H 10400 1565 50  0000 C CNN
F 1 "CONN_02X03" H 10400 1474 50  0000 C CNN
F 2 "footprints:Pin_Header_Straight_2x03" H 10400 50  50  0001 C CNN
F 3 "http://portal.fciconnect.com/Comergent//fci/drawing/67996.pdf" H 10400 50  50  0001 C CNN
F 4 "DK" H 10400 1250 60  0001 C CNN "MFN"
F 5 "609-3234-ND" H 10400 1250 60  0001 C CNN "MPN"
F 6 "https://www.digikey.com/product-detail/en/amphenol-fci/67997-206HLF/609-3234-ND/1878491" H 10800 1850 60  0001 C CNN "PurchasingLink"
	1    10400 1250
	1    0    0    -1  
$EndComp
Text Notes 10000 850  0    50   ~ 10
Programming Header
Text Label 10150 1150 2    50   ~ 0
MISO
Text Label 10150 1250 2    50   ~ 0
SCK
Text Label 10150 1350 2    50   ~ 0
RESET
Text Label 10650 1250 0    50   ~ 0
MOSI
$Comp
L power:VCC #PWR?
U 1 1 5E15CCC8
P 10800 1150
F 0 "#PWR?" H 10800 1000 50  0001 C CNN
F 1 "VCC" H 10817 1323 50  0000 C CNN
F 2 "" H 10800 1150 50  0001 C CNN
F 3 "" H 10800 1150 50  0001 C CNN
	1    10800 1150
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5E15CDA1
P 10800 1350
F 0 "#PWR?" H 10800 1100 50  0001 C CNN
F 1 "GND" H 10805 1177 50  0000 C CNN
F 2 "" H 10800 1350 50  0001 C CNN
F 3 "" H 10800 1350 50  0001 C CNN
	1    10800 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	10650 1150 10800 1150
Wire Wire Line
	10650 1350 10800 1350
$EndSCHEMATC
